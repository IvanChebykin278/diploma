## Общее положение

### Цель создания проекта
1. С точки зрения организации
    * Обеспечение контроля доступа на объкет (офис)
    * Удобный контроль посящаемости робочего места сотрудниками
    * Простота внедрения. Нет неоходимости устанавливать спецальное ПО на офисные комьютеры
2. С точки зрения клиента
    * Удобный доступ на объект
    * Возможность просмотра статистики посещения рабочего места
### Основные функциональные возможности Системы
1. Backend
    * Распознование лиц в видеопотоке

    * Определение вероятности потделки идентификатора (лица)
    
    * Возможность изменения режимы пропусоного контроля. Мягкий (в журнале событий будет отражен факт нарушения доступа, но система пропустит человека), временной (ориентир – время, руководствуясь которым система запрещает доступ в зону вплоть до выхода), строгий (система категорически запрещает повторный доступ до момента выхода)

    * Автоматическое добавление событий в базу данных исходя из анализа видео потока

    * Добавление неопознаных лиц в базу данных и присвоение ему уникального идентификатора (?)

    * Добавить/удалить отдел или подотдел

    * Добавить/изменить/удалить список сотрудников/посетителей, имеющих доступ на объект + описание фото и др. информация.

    * Добавить/изменить/удалить список идентификаторов сотрудника/посетителя

    * Возможность устаналивать разлиные варианты ограничений доступа на объект для сотрудника/посетителя

    * Добвление/изменение/удаление уровней доступа на объект + описание название и др. информация

    * Отчеты для владельца организации (?)

2. Frontend
    * Для оператора (охранника) (?)
        * Отображение видопотока с камеры видоналдения + выделение области лица посетителя с кратной информацие о нем

        * Возможность просмотра лога событий в реальном времени

    * Для администратора системы
        * Найти необходимого сотрудника/посетителя

        * Найти необходимы отдел или подотдел

        * Администрирование сотрудников/посетителей: внесение изменений в список объетов доступа, изменение списка идентификаторов объета доступа, присвоение ограничений для доспупа на объект для объекта(ов) доступа

    * Для руговодящих органов организации
        * Возможность просмотра статистики посящений сотрудника(ов)/посетителя(ей)

        * Возможность получения аналитической информиции о посещяемости сотрудника(ов)/посетителя(ей) (графики, средниние показатели и т.д)

        * Все возможножная сортировка и фильтрация данных статистики и аналитики

        * Отправка уведомлений сотруднику(ам) (?)

    * Для объетов доступа
        * Возможность просмотра личной статистики посещяемости

        * Возможность просмотра собственной аналитической информации о посещяемости рабочего места (графики, средниние показатели и т.д)

        * Все возможножная сортировка и фильтрация данных статистики и аналитики

        * Возможность прочитать уведомления
## Фунциональные требования
### Диаграммы Вариантов использования
**Диаграмма 1. Действующие лица**

На данной диаграмме представлена иерархия всех Пользователей Системы и внешних
участников. Связь обобщения следует читать следующим образом: Пользователь наследует все
поведение своего родителя + имеет свое поведение в Системе.

![](./src/diagramma1.jpg "Диаграмма 1. Действующие лица")

**TODO: доделать диаграммы вариантов использования**

## Описание Вариантов Использования
### ВИ "Создать объект доступа"
**Описание ВИ**

* Должна быть возможность зарегестрировать сотрудника/посетителя в системе

**Предусловия**

* Сотрудник/посетитель не зарегестрирован в системе (не создана запись в списке объетов доступа с его персональными данными)

**Основной поток действий**

1. Администратор заходит в раздел "Объекты доступа"

2. Администратор нажимает на кнопку "Создать объект доступа". В зависимости от того существут ли отдел к которому преписан сотрудник:
    * Если существут отдел к которому преписан сотрудник, то необходимо нажать на существующий отдел в дереве объектов доступа
    * Если отдела не существует необходимо нажать на корневой элемента дерева объектов доступа
    * Для постетителей в дереве объетов доступа существует отдельный объект "Посетители"

3. Система оторажает форму создания объкта доступа

4. Адимистратор вводит информацию о сотруднике/посетителе, вносит идентификаторы в список идентификаторо сотрудника/посетителя, так же он имеет возможность назначить уровень доступа, установить ограничения достпу на объект. Если администратор отменят действие форма создания объекта достпу закрывается.

5. Система проверят, что необходимые поля введены корректно. Если проверка прошла успешно, то поток продолжается, иначе сценарий переходит в п. 3, причем все значения (правильные и неправильные) должны отображаться в заполненных ранее полях с выделением неправильного поля и комментариями о существовании такого сотрудники/посетителя.

6. Система делат следующие действия:
    * Регестрирует сотрудника/посетителя с веденными ранее параметрами
    * Переобучает классификатор модуля распознования лиц на основании списка идентификаторов сотрудника/посетителя
    * Блокирует интерфейс до получения ответа от сервера
    * Оповещает администратора о успешности создания записи сотрудника/пользователя и обучении классификатора

### ВИ "Создать уровень доступа"
**Описание ВИ**

* Должна быть возможность создать уровень доступа на объект

**Предусловия**

* Уровень доступа с необходимыми параметрами отсуцтвует в системе

**Основной поток действий**

1. Администратор заходит в раздел "Уровни доступа"

2. Администратор нажимает на кнопку "Создать уровень доступа"

3. Система открывает форму создания уровня доступа

4. Адимистратор вводит неоходимые параметры. Если администратор отменят действие форма создания объекта достпу закрывается

5. Система проверят, что необходимые поля введены корректно. Если проверка прошла успешно, то поток продолжается, иначе сценарий переходит в п. 3, причем все значения (правильные и неправильные) должны отображаться в заполненных ранее полях с выделением неправильного поля и комментариями о существовании такого уровня доступа.

6. Система делат следующие действия:
    * Регестрирует уровень доступа с веденными ранее параметрами
    * Блокирует интерфейс до получения ответа от сервера
    * Оповещает администратора о успешности создания записи уровня доступа

### ВИ "Изменить объект доступа"
**Описание ВИ**

* Адмистратор должен иметь возможность изметь данные о объекте доступа

**Предусловия**

* Объект доступа должен существовать в списке обьектов доступа

**Основной поток действий**
1. Администратор заходит в раздел "Объекты доступа"

2. Администратор нажимает на объект доступа

3. Открывается форма объекта доступа

4. Администратор выбирает фунцию редатирования объекта доступа

5. Отрывается форма редатирования объекта доступа с заполнеными текущими данными. Поля которые могут быть изменены:
    * Личная информация:
        * Имя
        * Фамилия
        * Место проживания
        * Телефон
        * Элетронная почта
    * Список идентификаторов
    * Уровни доступа
    * Ограничения доступа

6. Администратор менят данные и выбирает функция сохранить

7. Система делат следующие действия:
    * Проверяет параметры на соответствие форматов и сохраняет данные. При этом система сохраняет предыдущие значения для бэкапов. (?)
    * Если список идентификаторов был изменен, то система переобучает классификатор модуля распознования лиц
    * Блокирует интерфейс до получения ответа от сервера (?)
    * Оповещает администратора о успешности операций

### ВИ "Администрирование модуля контроля доступа и распознования лиц (идентификации)"
**Описание ВИ**

* Адмистратор должен иметь возможность настраивать параметры модуля идентификации

**Предусловия**

* Отсуцтвуют (скорее всего появятся в будующем)

**Основной поток действий**
1. Администратор заходит в раздел "Модуль идентификации" (возможно название модуля поменяется)

2. Открывается форма с текущими параметрами модуля. В эти парамеры входят:
    * Праметры модуля распознования лиц
        * Минимальное растояние от идентификатора до камеры видеонаблюдения
        * Порог расстояния для классификации лица
        * Минимальная порог вероятности подленности идентификатора (то есть, если расчитаная вероятность идентификатора в видеопотоке будет меньше порогового значения, идентификатор будет расценен как потдельный)
        * (скорее всего добавятся еще некоторые параметры)
    * Режимы работы

3. Администратор выирает фунцию редатирования

4. Открывается форма редактирования с заполнеными данными теущих значений параметов

5. Администратор редактирует необходимые параметы и выбирает фунцию сохранить

7. Система делат следующие действия:
    * Проверяет параметры на соответствие форматов и сохраняет данные. При этом система сохраняет предыдущие значения для бэкапов. (?)
    * Блокирует интерфейс до получения ответа от сервера (?)
    * Оповещает администратора о успешности операций

### ВИ "Просмотреть статистику посещаемости сотрудников"
**Описание ВИ**

* Владелец организации или руководитель отдела дожен иметь возможность просмотреть статистику посщаемости своих сотрудников

**Предусловия**

* Если статиску просматривает руководитель отдела, то он должен быть назначен в списке объектов доступа определенного отдела 

**Основной поток действий**
1. Владелец организации или реководитель отдела переходит в раздел "Статиски посещаемости"

2. Отрывается форма просмотра статистики

3. Владелец организации или реководитель выбирает необходимые способы фильтрации информации:
    * По дате и времени
    * По отделам или списку отделов
    * По конкретному сотруднику или списку сотрудников

4. Система делат следующие действия:
    * Возвращает информацию в зависимости от установленных фильтров

**Правила**
1. Руководитель отдела может просматривать статистику только своих подчиненных


### ВИ "Просмотреть личную статистику посещаемости"
**Описание ВИ**

* Сотрудник/посетитель должен иметь возможность просмотреть личную статистику посещения объекта

**Предусловия**

* Сотрудник/посетитель должен быть зарегистрирован в системе

**Основной поток действий**
1. Сотрудник/посетитель переходит в раздел "Статисткика посещаемости"

2. Открывается форма просмотра статистики

3. Сотрудник/посетитель выбирает необходимые способы фильтрации информации:
    * По дате и времени

4. Система делат следующие действия:
    * Возвращает информацию в зависимости от установленных фильтров

//test 










        

